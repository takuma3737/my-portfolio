---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';

// Content Collectionsから最新の記事を取得
const articles = await getCollection('articles');
const latestPosts = articles
    .filter(article => !article.data.draft)
    .sort((a, b) => b.data.date.getTime() - a.data.date.getTime())
    .slice(0, 2) // 最新2件を取得
    .map(article => ({
        slug: article.slug,
        url: `/articles/${article.slug}`,
        title: article.data.title,
        date: article.data.date.toLocaleDateString('ja-JP', {
            year: 'numeric',
            month: 'long',
            day: 'numeric'
        }),
        emoji: article.data.emoji
    }));
---

<Layout title="泉拓真 - HRTech Backend Engineer">
    <main class="container mx-auto px-4 sm:px-6 py-8 sm:py-12">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 sm:gap-8 lg:gap-12">
            
            <div class="lg:col-span-2 space-y-8 sm:space-y-12">
                
                <section class="bg-white p-4 sm:p-8 rounded-2xl shadow-sm border border-gray-200/50">
                    <div class="flex flex-col items-center gap-4 sm:flex-row sm:gap-6">
                        <img src="/スクリーンショット 2025-07-06 11.45.48.png" alt="泉拓真のアイコン" class="w-20 h-20 sm:w-24 sm:h-24 md:w-32 md:h-32 rounded-full border-4 border-white shadow-md flex-shrink-0">
                        <div class="text-center sm:text-left">
                            <h1 class="text-xl sm:text-3xl md:text-4xl font-bold text-gray-800 leading-tight">
                                泉拓真 
                                <span class="block sm:inline text-base sm:text-xl md:text-2xl font-medium text-gray-600">(Izumi Takuma)</span>
                            </h1>
                            <p class="mt-2 text-sm sm:text-base text-gray-600 leading-relaxed">
                                🚀 HRTechのバックエンドエンジニア<br>
                                GoとPostgreSQLをメインに、時々フロントエンドも触ります
                            </p>
                        </div>
                    </div>
                </section>

                <section>
                    <h2 class="text-xl sm:text-2xl font-bold mb-4 sm:mb-6 flex items-center gap-2 text-gray-800">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" class="sm:w-6 sm:h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M22 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
                        経歴
                    </h2>
                    <div class="bg-white p-4 sm:p-8 rounded-2xl shadow-sm border border-gray-200/50 space-y-6 sm:space-y-8">
                        <div class="relative pl-6 sm:pl-8">
                             <div class="absolute left-0 top-1 w-3 h-3 sm:w-4 sm:h-4 bg-green-500 rounded-full border-2 sm:border-4 border-white"></div>
                             <div class="absolute left-[5px] sm:left-[7px] top-3 sm:top-4 h-full border-l-2 border-gray-200"></div>
                            <p class="font-semibold text-gray-500 text-sm">2021年4月</p>
                            <h3 class="font-bold text-base sm:text-lg mt-1 text-gray-800">佐賀大学理工学部理工学科　入学</h3>
                        </div>
                        <div class="relative pl-6 sm:pl-8">
                             <div class="absolute left-0 top-1 w-3 h-3 sm:w-4 sm:h-4 bg-green-500 rounded-full border-2 sm:border-4 border-white"></div>
                             <div class="absolute left-[5px] sm:left-[7px] top-3 sm:top-4 h-full border-l-2 border-gray-200"></div>
                            <p class="font-semibold text-gray-500 text-sm">2021年4月 - 2024年3月</p>
                            <h3 class="font-bold text-base sm:text-lg mt-1 text-gray-800">佐賀大学理工学部　機械工学専攻</h3>
                            <p class="text-xs sm:text-sm text-gray-600 mt-2">機械工学全般（物理、流体、熱力学、電気電子、溶接や旋盤など）を学習。基礎から応用まで幅広い工学知識を習得。</p>
                            <div class="mt-3 pl-3 sm:pl-4 border-l-2 border-green-200 bg-green-50 p-2 sm:p-3 rounded-r-lg">
                                <p class="text-xs font-semibold text-green-700 mb-1">🎯 在学中の活動（2023年3月 - 2023年8月）</p>
                                <h4 class="font-bold text-xs sm:text-sm text-gray-800">DMM WEBCAMP 長期インターン</h4>
                                <p class="text-xs text-gray-600 mt-1">プログラミングメンターとして従事。Ruby、HTML、CSS、Ruby on Railsを用いた開発を学習・指導。</p>
                            </div>
                        </div>
                        <div class="relative pl-6 sm:pl-8">
                             <div class="absolute left-0 top-1 w-3 h-3 sm:w-4 sm:h-4 bg-green-500 rounded-full border-2 sm:border-4 border-white"></div>
                             <div class="absolute left-[5px] sm:left-[7px] top-3 sm:top-4 h-full border-l-2 border-gray-200"></div>
                            <p class="font-semibold text-gray-500 text-sm">2024年4月 - 2025年2月</p>
                            <h3 class="font-bold text-base sm:text-lg mt-1 text-gray-800">佐賀大学　流体力学分野の研究</h3>
                            <p class="text-xs sm:text-sm text-gray-600 mt-2">航空宇宙機器で用いられる超音速ノズルの内部で流れる流体の挙動を研究。どんな形状のノズルが最もエネルギー損失が小さくなるのかを調査・解析。</p>
                        </div>
                        <div class="relative pl-6 sm:pl-8">
                             <div class="absolute left-0 top-1 w-3 h-3 sm:w-4 sm:h-4 bg-green-500 rounded-full border-2 sm:border-4 border-white"></div>
                             <div class="absolute left-[5px] sm:left-[7px] top-3 sm:top-4 h-full border-l-2 border-gray-200"></div>
                            <p class="font-semibold text-gray-500 text-sm">2025年3月</p>
                            <h3 class="font-bold text-base sm:text-lg mt-1 text-gray-800">佐賀大学理工学部機械エネルギー工学科　卒業</h3>
                        </div>
                        <div class="relative pl-6 sm:pl-8">
                            <div class="absolute left-0 top-1 w-3 h-3 sm:w-4 sm:h-4 bg-green-500 rounded-full border-2 sm:border-4 border-white"></div>
                            <p class="font-semibold text-gray-500 text-sm">2025年4月 - 現在</p>
                            <h3 class="font-bold text-base sm:text-lg mt-1 text-gray-800">株式会社HRBrain</h3>
                            <p class="text-xs sm:text-sm text-gray-600 mt-2">バックエンドエンジニアとして、GoとPostgreSQLを用いて小規模なサービスの開発に従事。チームの状況に合わせてフロントの改修も行っている。</p>
                        </div>
                    </div>
                </section>

                 <section>
                    <h2 class="text-xl sm:text-2xl font-bold mb-4 sm:mb-6 flex items-center gap-2 text-gray-800">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" class="sm:w-6 sm:h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 6h16M4 12h16M4 18h12"></path></svg>
                        最新の記事
                    </h2>
                    <div class="grid grid-cols-1 gap-4 sm:gap-6">
                        {latestPosts.map(post => (
                            <a href={post.url} class="block bg-white p-4 sm:p-6 rounded-2xl shadow-sm border border-gray-200/50 hover:shadow-lg hover:-translate-y-1 transition-all">
                                <div class="flex items-start gap-3 sm:gap-4">
                                    <div class="text-2xl sm:text-4xl flex-shrink-0">{post.emoji}</div>
                                    <div class="min-w-0 flex-1">
                                        <h3 class="font-bold text-sm sm:text-lg text-gray-800 leading-tight">{post.title}</h3>
                                        <p class="text-xs sm:text-sm text-gray-500 mt-1">{post.date}</p>
                                    </div>
                                </div>
                            </a>
                        ))}
                    </div>
                    <div class="text-center mt-6 sm:mt-8">
                        <a href="/articles" class="inline-block bg-green-600 text-white font-bold px-5 py-2.5 sm:px-6 sm:py-3 rounded-lg hover:bg-green-700 transition-colors text-sm sm:text-base">
                            すべての記事を見る
                        </a>
                    </div>
                </section>

            </div>

            <aside class="lg:col-span-1">
                <div class="bg-white p-4 sm:p-6 rounded-2xl shadow-sm border border-gray-200/50">
                    <h3 class="font-bold text-base sm:text-lg mb-3 sm:mb-4 border-l-4 border-green-600 pl-3">スキル</h3>
                    <div class="space-y-4 sm:space-y-6 text-xs sm:text-sm">
                        <div>
                            <h4 class="font-semibold text-gray-700 mb-2">言語</h4>
                            <table class="w-full"><tbody><tr class="border-b border-gray-100"><td class="py-1.5 sm:py-2 text-gray-600">Go</td><td class="py-1.5 sm:py-2 text-gray-500 text-right">6ヶ月</td></tr><tr class="border-b border-gray-100"><td class="py-1.5 sm:py-2 text-gray-600">TypeScript</td><td class="py-1.5 sm:py-2 text-gray-500 text-right">1ヶ月</td></tr><tr class="border-b border-gray-100"><td class="py-1.5 sm:py-2 text-gray-600">Ruby</td><td class="py-1.5 sm:py-2 text-gray-500 text-right">5ヶ月</td></tr><tr><td class="py-1.5 sm:py-2 text-gray-600">HTML/CSS</td><td class="py-1.5 sm:py-2 text-gray-500 text-right">5ヶ月</td></tr></tbody></table>
                        </div>
                        <div>
                            <h4 class="font-semibold text-gray-700 mb-2">フレームワーク</h4>
                             <table class="w-full"><tbody><tr class="border-b border-gray-100"><td class="py-1.5 sm:py-2 text-gray-600">React</td><td class="py-1.5 sm:py-2 text-gray-500 text-right">1ヶ月</td></tr><tr><td class="py-1.5 sm:py-2 text-gray-600">Ruby on Rails</td><td class="py-1.5 sm:py-2 text-gray-500 text-right">5ヶ月</td></tr></tbody></table>
                        </div>
                        <div>
                            <h4 class="font-semibold text-gray-700 mb-2">データベース・その他</h4>
                             <table class="w-full"><tbody><tr><td class="py-1.5 sm:py-2 text-gray-600">PostgreSQL</td><td class="py-1.5 sm:py-2 text-gray-500 text-right">6ヶ月</td></tr></tbody></table>
                        </div>
                    </div>
                </div>
            </aside>
        </div>
    </main>
</Layout>